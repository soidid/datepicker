<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Crossing the lines?</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="./style.css" rel="stylesheet">


</head>
<body>
<div>Every 6 months, up to <span class="duration">90</span> days.</div>
<div>
<h2>Last Trip</h2>
	Start: <input type="text" id="datepicker1" value="2016-03-09"><br/>
	End: <input type="text" id="datepicker2" value="2016-03-16">
	<div class="limit">6 months until <span id="trip1limit" ></span></div>
</div>
<div>
<h2>This Trip</h2>
	Start: <input type="text" id="datepicker3" value="2016-07-27"><br/>
	End: <input type="text" id="datepicker4" value="2016-10-05">
</div>

<button onClick="count();">Calculate</button>

<div>
Last Trip: <span id="trip1" class="duration"></span> days. <br/>
This Trip: <span id="trip2" class="duration"></span> days. <br/>
</div>


<script src="./js/moment.js"></script>
<script src="./js/pikaday.js"></script>
<script>
 	document.addEventListener("DOMContentLoaded", function(event) {
        count();
  	});

    var picker1 = new Pikaday({
        field: document.getElementById('datepicker1'),
        format: 'YYYY-MM-DD',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY-MM-DD'));
            count();
        }
    });
    var picker2 = new Pikaday({
        field: document.getElementById('datepicker2'),
        format: 'YYYY-MM-DD',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY-MM-DD'));
            count();
        }
    });
    var picker3 = new Pikaday({
        field: document.getElementById('datepicker3'),
        format: 'YYYY-MM-DD',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY-MM-DD'));
            count();
        }
    });
    var picker4 = new Pikaday({
        field: document.getElementById('datepicker4'),
        format: 'YYYY-MM-DD',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY-MM-DD'));
            count();
        }
    });

    function count(){
    	var date1 = moment(document.getElementById('datepicker1').value);
    	var date2 = moment(document.getElementById('datepicker2').value);
    	var date3 = moment(document.getElementById('datepicker3').value);
    	var date4 = moment(document.getElementById('datepicker4').value);
    	
    	var period1 = date2.diff(date1, 'days');
    	var period2 = date4.diff(date3, 'days');
    	document.getElementById('trip1').innerHTML = "";
    	document.getElementById('trip2').innerHTML = "";
    	document.getElementById('trip1').appendChild(document.createTextNode(period1));
    	document.getElementById('trip2').appendChild(document.createTextNode(period2));

    	console.log(period1);
    	console.log(period2);
    	
    	var d = date1.format("YYYY,MM,DD").split(',');
    	var date1_end = moment(d).add(6, 'M').format('YYYY-MM-DD');
    	console.log(date1_end);
    	document.getElementById('trip1limit').innerHTML = "";
    	document.getElementById('trip1limit').appendChild(document.createTextNode(date1_end));

    	
    }
</script> 

    
</body>
</html>